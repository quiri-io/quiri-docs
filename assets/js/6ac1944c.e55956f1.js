"use strict";(self.webpackChunkquiri_docs=self.webpackChunkquiri_docs||[]).push([[4287],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return h}});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=l(r),h=i,f=m["".concat(c,".").concat(h)]||m[h]||u[h]||o;return r?n.createElement(f,a(a({ref:t},p),{},{components:r})):n.createElement(f,a({ref:t},p))}));function h(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:i,a[1]=s;for(var l=2;l<o;l++)a[l]=r[l];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},2797:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return u}});var n=r(7462),i=r(3366),o=(r(7294),r(3905)),a=["components"],s={},c="Streaming Repositories with Bloc",l={unversionedId:"App Architecture/streaming-repositories-with-bloc",id:"App Architecture/streaming-repositories-with-bloc",title:"Streaming Repositories with Bloc",description:"Background",source:"@site/docs/App Architecture/streaming-repositories-with-bloc.md",sourceDirName:"App Architecture",slug:"/App Architecture/streaming-repositories-with-bloc",permalink:"/quiri-docs/App Architecture/streaming-repositories-with-bloc",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/quiri-docs/"},next:{title:"Adding FCM",permalink:"/quiri-docs/App Deployment and DIstribution/adding-fcm"}},p={},u=[{value:"Background",id:"background",level:2},{value:"Streaming from the Matrix Client",id:"streaming-from-the-matrix-client",level:2}],m={toc:u};function h(e){var t=e.components,r=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"streaming-repositories-with-bloc"},"Streaming Repositories with Bloc"),(0,o.kt)("h2",{id:"background"},"Background"),(0,o.kt)("p",null,'I chose Bloc as the state management solution for Quiri after a lot of reading into the different options because I felt that it had less "magic". It also had twice the Github stars of the next most popular project and seemed to have the support of larger teams. Since choosing it there have been some challenges.'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"side-effects and one-time events like page navigations and toast messages"),(0,o.kt)("li",{parentName:"ul"},"streaming data from the matrix client")),(0,o.kt)("h2",{id:"streaming-from-the-matrix-client"},"Streaming from the Matrix Client"),(0,o.kt)("p",null,"I go into more detail on how the matrix Dart SDK syncs data with the server and exposes in the ","[Listening for New Messages With the Matrix SDK]","(2024-12-19-listening-for-new-messages-with-the-matrix-sdk copy.md) article. Ultimately the SDK already maintains the state of all events, etc. that come from the Matrix server. What the SDK exposes to Bloc then is a state object and a collection of streams that can be subsciribed to that provide all event details. I have been subscribing to the matrix streams in the Bloc and then adding events to the bloc for each new emission from the matrix stream. ",(0,o.kt)("a",{parentName:"p",href:"https://verygood.ventures/blog/how-to-use-bloc-with-streams-and-concurrency"},"This article from the Bloc team")," presents ",(0,o.kt)("inlineCode",{parentName:"p"},"emit.forEach")," as an option for subscribing to ",(0,o.kt)("inlineCode",{parentName:"p"},"reactive repositories")," instead. ",(0,o.kt)("a",{parentName:"p",href:"https://bloclibrary.dev/architecture/#connecting-blocs-through-domain"},"They show the same pattern here in the docs"),"."))}h.isMDXComponent=!0}}]);